{"version":3,"file":"confirmation-mkZ71U2n.js","sources":["../../../../pages/confirmation.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div v-if=\"isDataValid\">\r\n            <section class=\"bg-white py-8 px-5 antialiased dark:bg-gray-900 md:py-16\">\r\n                <div class=\"mx-auto max-w-screen-xl px-4 2xl:px-0\">\r\n                    <div class=\"mt-32 lg:flex lg:items-start lg:gap-12 xl:gap-16\">\r\n                        <div class=\"min-w-0 flex-1 space-y-8\">\r\n                            <div class=\"space-y-4\">\r\n                                <h2 class=\"text-xl font-semibold text-gray-900 dark:text-white\">Confirmation Payment\r\n                                </h2>\r\n                                <form @submit.prevent=\"submitForm\" class=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                                    <div>\r\n                                        <label for=\"guestname\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\">Guest\r\n                                            Name*</label>\r\n                                        <input type=\"text\" id=\"guestname\" name=\"guestname\" v-model=\"guestname\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"Bonnie\" required />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label for=\"firstname\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\">\r\n                                            First Name*</label>\r\n                                        <input type=\"text\" id=\"firstname\" name=\"firstname\" v-model=\"firstname\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"Green\" required />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label for=\"lastname\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\">\r\n                                            Last Name*</label>\r\n                                        <input type=\"text\" id=\"lastname\" name=\"lastname\" v-model=\"lastname\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"Green\" required />\r\n                                    </div>\r\n\r\n\r\n                                    <div>\r\n                                        <div class=\"mb-2 flex items-center gap-2\">\r\n                                            <label for=\"select-country-input-3\"\r\n                                                class=\"block text-sm font-medium text-gray-900 dark:text-white\">Country</label>\r\n                                        </div>\r\n                                        <select id=\"select-country-input-3\" name=\"country\" v-model=\"country\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            @change=\"loadStates\">\r\n                                            <option disabled selected>Select a country</option>\r\n                                            <option v-for=\"country in countries\" :key=\"country.name\"\r\n                                                :value=\"country.name\">\r\n                                                {{ country.name }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <div class=\"mb-2 flex items-center gap-2\">\r\n                                            <label for=\"select-state-input-3\"\r\n                                                class=\"block text-sm font-medium text-gray-900 dark:text-white\">State</label>\r\n                                        </div>\r\n                                        <select id=\"select-state-input-3\" name=\"state\" v-model=\"selectState\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            @change=\"loadCities\">\r\n                                            <option disabled selected>Select a state</option>\r\n                                            <option v-for=\"state in states\" :key=\"state.name\" :value=\"state.name\">\r\n                                                {{ state.name }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        <div class=\"mb-2 flex items-center gap-2\">\r\n                                            <label for=\"select-city-input-3\"\r\n                                                class=\"block text-sm font-medium text-gray-900 dark:text-white\">City</label>\r\n                                        </div>\r\n                                        <select id=\"select-city-input-3\" name=\"city\" v-model=\"selectCity\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\">\r\n                                            <option disabled selected>Select a city</option>\r\n                                            <option v-for=\"city in cities\" :key=\"city\" :value=\"city\">\r\n                                                {{ city }}\r\n                                            </option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label for=\"phone-zip-3\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\">\r\n                                            Zip Code</label>\r\n                                        <input type=\"text\" id=\"zip-input\" name=\"zipcode\" v-model=\"zipInput\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"1234\" />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label for=\"phone-input-3\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\"\r\n                                            name=\"phone\">Phone\r\n                                            Number*</label>\r\n                                        <input type=\"text\" id=\"phone-input\" v-model=\"phoneInput\" name=\"phone\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"123-456-7890\" required />\r\n                                    </div>\r\n\r\n                                    <div class=\"sm:col-span-2\">\r\n                                        <label for=\"email\"\r\n                                            class=\"mb-2 block text-sm font-medium text-gray-900 dark:text-white\">\r\n                                            Email </label>\r\n                                        <input type=\"email\" id=\"email\" name=\"email\" v-model=\"email\"\r\n                                            class=\"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500\"\r\n                                            placeholder=\"name@guirez.com\" required />\r\n                                    </div>\r\n                                    <div class=\"flex items-start mb-5\">\r\n                                        <div class=\"flex items-center h-5\">\r\n                                            <input id=\"terms\" type=\"checkbox\" v-model=\"terms\" true-value=\"on\"\r\n                                                false-value=\"off\"\r\n                                                class=\"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800\"\r\n                                                required />\r\n                                        </div>\r\n                                        <label for=\"terms\"\r\n                                            class=\"ms-2 text-sm font-medium text-gray-900 dark:text-gray-300\">I agree\r\n                                            with the <a href=\"#\"\r\n                                                class=\"text-blue-600 hover:underline dark:text-blue-500\">terms and\r\n                                                conditions</a></label>\r\n                                    </div>\r\n                                    <div class=\"sm:col-span-2\">\r\n                                        <button type=\"submit\"\r\n                                            class=\"bg-blue flex w-full items-center justify-center gap-2 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-white hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700\">\r\n                                            Go to Payment\r\n                                        </button>\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"mt-6 w-full space-y-6 sm:mt-8 lg:mt-0 lg:max-w-xs xl:max-w-md\">\r\n                            <div class=\"flow-root\">\r\n                                <div class=\"-my-3 divide-y divide-gray-200 dark:divide-gray-800\">\r\n                                    <dl class=\"flex items-center justify-between gap-4 py-3\">\r\n                                        <dt class=\"text-base font-normal text-gray-500 dark:text-gray-400\">Ticket</dt>\r\n                                        <dd class=\"text-base font-medium text-gray-900 dark:text-white\">\r\n                                            {{ ticketData.selectedTicket.name }}</dd>\r\n                                    </dl>\r\n\r\n                                    <dl class=\"flex items-center justify-between gap-4 py-3\">\r\n                                        <dt class=\"text-base font-normal text-gray-500 dark:text-gray-400\">Occupancy\r\n                                        </dt>\r\n                                        <dd class=\"text-base font-medium text-gray-500\">{{ ticketData.adultsCount }}\r\n                                            Adult,\r\n                                            {{ ticketData.childrenCount }} Children, {{ ticketData.infantsCount }}</dd>\r\n                                    </dl>\r\n\r\n                                    <dl class=\"flex items-center justify-between gap-4 py-3\">\r\n                                        <dt class=\"text-base font-normal text-gray-500 dark:text-gray-400\">Date</dt>\r\n                                        <dd class=\"text-base font-medium text-gray-900 dark:text-white\">\r\n                                            {{ $dayjs(ticketData.selectedDate).format('dddd, MMMM DD, YYYY') }}\r\n                                        </dd>\r\n                                    </dl>\r\n                                    <dl class=\"flex items-center justify-between gap-4 py-3\">\r\n                                        <dt class=\"text-base font-bold text-gray-900 dark:text-white\">Total</dt>\r\n                                        <dd class=\"text-base font-bold text-gray-900 dark:text-white\">IDR {{\r\n            calculateDiscountedPrice(ticketData.selectedTicket) }}</dd>\r\n                                    </dl>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n        <div v-else>\r\n            <section class=\"bg-white dark:bg-gray-900\">\r\n                <div class=\"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6\">\r\n                    <div class=\"mx-auto max-w-screen-sm text-center\">\r\n                        <h1\r\n                            class=\"mb-4 text-7xl tracking-tight font-extrabold lg:text-9xl text-primary-600 dark:text-primary-500\">\r\n                            404</h1>\r\n                        <p class=\"mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white\">\r\n                            Something's missing.</p>\r\n                        <p class=\"mb-4 text-lg font-light text-gray-500 dark:text-gray-400\">Data not available. Please\r\n                            go back and select a ticket. </p>\r\n                        <a @click=\"goBack\"\r\n                            class=\"inline-flex text-white bg-blue font-medium rounded-lg text-sm px-5 py-2.5 text-center my-4\">Back\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, onMounted } from 'vue';\r\nimport { useTicketStore } from '~/stores/ticket';\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\nconst countries = ref([]);\r\nconst states = ref([]);\r\nconst cities = ref([]);\r\nconst guestname = ref('');\r\nconst firstname = ref('');\r\nconst lastname = ref('');\r\nconst selectedCountry = ref('')\r\nconst selectCountry = ref('');\r\nconst selectState = ref('');\r\nconst selectCity = ref('');\r\nconst zipInput = ref('');\r\nconst phoneInput = ref('');\r\nconst email = ref('');\r\nconst terms = ref('');\r\n\r\nconst ticketStore = useTicketStore();\r\nconst ticketData = ticketStore.$state;\r\n\r\n// Calculate total price\r\nconst calculateTotalPrice = (ticket) => {\r\n    const totalPrice = (ticket.adult_price * ticketData.adultsCount) + (ticket.children_price * ticketData.childrenCount) + (ticket.infant_price * ticketData.infantsCount);\r\n    return totalPrice;\r\n};\r\n\r\n// Calculate discounted price\r\nconst calculateDiscountedPrice = (ticket) => {\r\n    const total = calculateTotalPrice(ticket);\r\n    const discountedPrice = total * ((100 - ticket.discount_percentage) / 100);\r\n    return discountedPrice;\r\n};\r\n\r\n// Check if the data is valid\r\nconst isDataValid = computed(() => {\r\n    return ticketData.selectedTicket && ticketData.selectedTicket.id;\r\n});\r\n\r\nconst router = useRouter();\r\n\r\n// Function to go back to the previous page\r\nconst goBack = () => {\r\n    router.go(-1); // Go back one step in history (equivalent to browser back button)\r\n};\r\n\r\nonMounted(async () => {\r\n    try {\r\n        const response = await axios.get('https://countriesnow.space/api/v0.1/countries/iso');\r\n        countries.value = response.data.data;\r\n    } catch (error) {\r\n        console.error('Error fetching countries:', error);\r\n    }\r\n});\r\n\r\nconst loadStates = async (event) => {\r\n    const selectedIso2 = event.target.value;\r\n    selectedCountry.value = selectedIso2; // Set selectedCountry\r\n\r\n    try {\r\n        const response = await axios.post('https://countriesnow.space/api/v0.1/countries/states', {\r\n            country: selectedIso2\r\n        });\r\n        states.value = response.data.data.states;\r\n        cities.value = []; // Reset cities when changing states\r\n    } catch (error) {\r\n        console.error('Error fetching states:', error);\r\n    }\r\n};\r\n\r\nconst loadCities = async (event) => {\r\n    const selectedState = event.target.value;\r\n\r\n    try {\r\n        const response = await axios.post('https://countriesnow.space/api/v0.1/countries/state/cities', {\r\n            country: selectedCountry.value, // Pass selectedCountry value\r\n            state: selectedState\r\n        });\r\n        cities.value = response.data.data;\r\n    } catch (error) {\r\n        console.error('Error fetching cities:', error);\r\n    }\r\n};\r\nconst submitForm = async () => {\r\n    const formData = {\r\n        guestname: guestname.value,\r\n        firstname: firstname.value,\r\n        lastname: lastname.value,\r\n        country: selectedCountry.value,\r\n        state: selectState.value,\r\n        city: selectCity.value,\r\n        zipcode: zipInput.value,\r\n        phone: phoneInput.value,\r\n        email: email.value,\r\n        terms: terms.value,\r\n        adult: ticketData.adultsCount,\r\n        children: ticketData.childrenCount,\r\n        infant: ticketData.infantsCount,\r\n        id: ticketData.selectedTicket.id,\r\n        product_id: ticketData.selectedTicket.product_id,\r\n        vendor_id: ticketData.selectedTicket.vendor_id,\r\n        slug: ticketData.selectedTicket.slug,\r\n        arrival: ticketData.selectedDate,\r\n        adult_price: ticketData.selectedTicket.adult_price,\r\n        children_price: ticketData.selectedTicket.children_price,\r\n        infant_price: ticketData.selectedTicket.infant_price,\r\n        total_adult_price: ticketData.selectedTicket.total_adult,\r\n        total_children_price: ticketData.selectedTicket.total_children,\r\n        total_infant_price: ticketData.selectedTicket.total_infant,\r\n        total_price: calculateDiscountedPrice(ticketData.selectedTicket),\r\n    };\r\n\r\n    try {\r\n        const response = await axios.post('https://balitiket.mindimedia.com/api/v1/send-form', formData, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                // You may need additional headers like Authorization if required by your API\r\n            },\r\n        });\r\n\r\n        console.log('Form submission successful:', response.data);\r\n        // Handle success (e.g., redirect to payment page)\r\n        // Example: router.push('/payment'); // Uncomment if using Vue Router\r\n    } catch (error) {\r\n        console.error('Error submitting form:', error.message);\r\n        // Handle error (e.g., show error message to user)\r\n    }\r\n};\r\n</script>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA,UAAM,YAAY,IAAI,CAAA,CAAE;AACxB,UAAM,SAAS,IAAI,CAAA,CAAE;AACrB,UAAM,SAAS,IAAI,CAAA,CAAE;AACrB,UAAM,YAAY,IAAI,EAAE;AACxB,UAAM,YAAY,IAAI,EAAE;AACxB,UAAM,WAAW,IAAI,EAAE;AACC,QAAI,EAAE;AACR,QAAI,EAAE;AACR,QAAI,EAAE;AACP,QAAI,EAAE;AACzB,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,aAAa,IAAI,EAAE;AACzB,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,QAAQ,IAAI,EAAE;AAEpB,UAAM,cAAc,eAAc;AAClC,UAAM,aAAa,YAAY;AAG/B,UAAM,sBAAsB,CAAC,WAAW;AACpC,YAAM,aAAc,OAAO,cAAc,WAAW,cAAgB,OAAO,iBAAiB,WAAW,gBAAkB,OAAO,eAAe,WAAW;AAC1J,aAAO;AAAA,IACX;AAGA,UAAM,2BAA2B,CAAC,WAAW;AACzC,YAAM,QAAQ,oBAAoB,MAAM;AACxC,YAAM,kBAAkB,UAAU,MAAM,OAAO,uBAAuB;AACtE,aAAO;AAAA,IACX;AAGA,UAAM,cAAc,SAAS,MAAM;AAC/B,aAAO,WAAW,kBAAkB,WAAW,eAAe;AAAA,IAClE,CAAC;AAEc,cAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}